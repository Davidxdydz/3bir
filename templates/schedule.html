{% extends "base.html" %}

{% block content %}
{% set active = table.active_game %}
{% set upcoming = table.scheduled_games %}

<div class="page-shell">
    <section class="panel">
        <p class="section-subtitle">Live</p>
        <div class="section-split">
            <div class="flex items-center gap-4">
                <div class="pill">{{ 'active match' if active else 'idle' }}</div>
                <div class="pill">
                    {{ upcoming|length }} queued
                </div>
            </div>
        </div>

        <div class="grid gap-6 lg:grid-cols-2">
            <div class="rounded-3xl border border-white/5 bg-white/5 p-6">
                <p class="text-xs uppercase tracking-[0.3em] text-white/60">Now playing</p>
                {% if active %}
                <h2 class="mt-2 text-2xl font-semibold text-white">{{ active.team_a.name }} vs {{ active.team_b.name }}
                </h2>
                <p class="text-sm text-slate-400">Started: {{ active.start_time or 'TBD' }}</p>
                <div class="mt-4 flex items-center gap-4 text-sm text-slate-300">
                    <span>Score A: {{ active.team_a_score }}</span>
                    <span>Score B: {{ active.team_b_score }}</span>
                </div>
                {% else %}
                <p class="mt-3 text-lg text-white/70">No game is in progress.</p>
                {% endif %}
            </div>

            <div class="rounded-3xl border border-white/5 bg-gradient-to-br from-brand-500/20 to-purple-500/20 p-6">
                <p class="text-xs uppercase tracking-[0.3em] text-white/70">Next up</p>
                {% if upcoming %}
                <ul class="mt-4 space-y-4 text-sm">
                    {% for game in upcoming[:4] %}
                    <li class="flex items-center justify-between rounded-2xl bg-white/5 px-4 py-3">
                        <div>
                            <p class="font-semibold text-white">{{ game.team_a.name }} vs {{ game.team_b.name }}</p>
                            <p class="text-xs text-white/60">{{ game.start_time or 'TBD' }}</p>
                        </div>
                        <span class="rounded-full border border-white/20 px-3 py-1 text-xs text-white/70">Queued</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="mt-3 text-lg text-white/80">There are no queued games.</p>
                {% endif %}
            </div>
        </div>
    </section>

    <section class="panel space-y-0 overflow-hidden p-0">
        <div class="flex items-center justify-between px-6 py-4">
            <div>
                <p class="section-subtitle">Schedule</p>
            </div>
        </div>
        <div class="table-scroll">
            <table class="min-w-full divide-y divide-white/5 text-left">
                <thead class="bg-white/5 text-xs uppercase tracking-[0.3em] text-white/60">
                    <tr>
                        <th class="px-6 py-3">Start time</th>
                        <th class="px-6 py-3">Team A</th>
                        <th class="px-6 py-3">Team B</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-white/5 text-sm">
                    {% if active %}
                    <tr class="bg-brand-500/10">
                        <td class="px-6 py-4 font-medium text-white">{{ active.start_time or 'In progress' }}</td>
                        <td class="px-6 py-4 text-brand-100">{{ active.team_a.name }}</td>
                        <td class="px-6 py-4 text-brand-100">{{ active.team_b.name }}</td>
                    </tr>
                    {% endif %}
                    {% if upcoming %}
                    {% for game in upcoming %}
                    <tr class="transition hover:bg-white/5">
                        <td class="px-6 py-4 text-white/70">{{ game.start_time or 'TBD' }}</td>
                        <td class="px-6 py-4 text-white">{{ game.team_a.name }}</td>
                        <td class="px-6 py-4 text-white">{{ game.team_b.name }}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="3" class="px-6 py-6 text-center text-slate-400">No scheduled games at the moment.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </section>
</div>
{% endblock %}